(function(d,k,w){var m=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;k.Class=function(){};Class.extend=function(a){function b(){!m&&this.init&&this.init.apply(this,arguments)}var c=this.prototype;m=!0;var d=new this;m=!1;for(var e in a)"function"===typeof a[e]&&"function"===typeof c[e]&&t.test(a[e])?d[e]=function(a,b){return function(){var d=this._super;this._super=c[a];var e=b.apply(this,arguments);this._super=d;return e}}(e,a[e]):d[e]=a[e];b.prototype=d;b.prototype.constructor=b;b.extend=k.Class.extend;
return b};var n=Object.prototype.toString,l=function(a){return"[object String]"===n.call(a)},f=function(a){return"[object Object]"===n.call(a)},p=function(a){return!!(a&&a.constructor&&a.call&&a.apply)},h=[null,{s:"Jan",l:"January",d:31},{s:"Feb",l:"February",d:28},{s:"Mar",l:"March",d:31},{s:"Apr",l:"April",d:30},{s:"May",l:"May",d:31},{s:"Jun",l:"June",d:30},{s:"Jul",l:"July",d:31},{s:"Aug",l:"August",d:31},{s:"Sept",l:"September",d:30},{s:"Oct",l:"October",d:31},{s:"Nov",l:"November",d:30},{s:"Dec",
l:"December",d:31}],q={jan:1,january:1,feb:2,february:2,mar:3,march:3,apr:4,april:4,may:5,jun:6,june:6,jul:7,july:7,aug:8,august:8,sep:9,sept:9,september:9,oct:10,october:10,nov:11,november:11,dec:12,december:12},u=[" ","/","-"];k.YearlessDate=Class.extend({init:function(){var a=arguments[arguments.length-1];f(a)||(a={});this.settings=d.extend({separator:"/",format:"long",british:!0},a);if(1>arguments.length)throw Error("No arguments passed to YearlessDate");2>arguments.length?this.md=this._oneArgumentInit(arguments[0]):
3>arguments.length?f(arguments[1])?this.md=this._oneArgumentInit(arguments[0]):this.md=this._twoArgumentInit(arguments[0],arguments[1]):this.md=this._twoArgumentInit(arguments[0],arguments[1])},_oneArgumentInit:function(a){if(l(a))return this._parseStr(a);if(d.isArray(a))return this._parseArr(a);throw Error("Invalid argument: "+a);},_twoArgumentInit:function(a,b){var c=parseInt(a,10),d=parseInt(b,10);if(isNaN(c)||isNaN(d))throw Error("Invalid arguments: "+a+", "+b);return[c,d]},_parseStr:function(a){var b,
c=!1,g=!1;d.each(u,function(d,g){b=a.split(g);if(2===b.length)return c=!0,!1});if(!c)throw Error("Invalid YearlessDate: "+a);d.each([0,1],function(a){var c=b[a].toLowerCase();"undefined"!==typeof q[c]&&(b[a]=q[c],g=0===a%2)});return this._parseArr(b,g)},_parseArr:function(a,b){var c=(b="[object Boolean]"===n.call(b)?b:this.settings.british)?a[0]:a[1],g=b?a[1]:a[0];if(!d.isArray(a)||2>a.length)throw Error("Invalid argument: "+a);try{return this._parseMonthDay(c,g)}catch(e){return this._parseMonthDay(g,
c)}},_parseMonthDay:function(a,b){var c;a=parseInt(a,10);b=parseInt(b,10);if(isNaN(a)||isNaN(b)||"undefined"===typeof h[a])throw Error("Invalid m, d: "+a+", "+b);c=h[a].d;if(1>b||b>c)throw Error("Invalid day: "+b);return[a,b]},compareTo:function(a){return this.md[0]>a.md[0]?1:a.md[0]>this.md[0]?-1:this.md[1]>a.md[1]?1:a.md[1]>this.md[1]?-1:0},isBetween:function(a,b){var c=a.compareTo(b);return 0===c?!0:0>c?0>=a.compareTo(this)&&0<=b.compareTo(this):0>=a.compareTo(this)||0<=b.compareTo(this)},toString:function(a,
b){if("short"===a)return this.md[1]+" "+h[this.md[0]].s;if("long"===a)return this.md[1]+" "+h[this.md[0]].l;if("json"===a)return JSON.stringify({m:this.md[0],d:this.md[1]});l(b)||(b=this.settings.separator);return"monthDay"===a?this.md.join(b):this.md.reverse().join(b)},getMonth:function(a){var b=this.md[0];return"short"===a||"long"===a?YearlessDate.getMonthName(b,a):"numeric"===a?b:(a?"0":"")+b},getDay:function(a){return"numeric"===a?this.md[1]:(a?"0":"")+this.md[1]},shiftMonth:function(a){a=(this.md[0]-
1+parseInt(a,10))%12;if(isNaN(a))return this;0>a&&(a+=12);this.md[0]=a+1;a=YearlessDate.getDaysInMonth(this.md[0]);this.md[1]>a&&(this.md[1]=a);return this},shiftDay:function(a){var b=YearlessDate.getDaysInMonth(this.md[0]),c=!0;for(this.md[1]+=a;c;)1>this.md[1]?(this.shiftMonth(-1),b=YearlessDate.getDaysInMonth(this.md[0]),this.md[1]+=b):this.md[1]>b?(this.md[1]-=b,this.shiftMonth(1),b=YearlessDate.getDaysInMonth(this.md[0])):c=!1;return this},setMonth:function(a){a=parseInt(a,10);var b=YearlessDate.getDaysInMonth(a);
if(!1===b)return!1;this.md[1]>b&&(this.md[1]=b);return this.md[0]=a},setDay:function(a){var b=YearlessDate.getDaysInMonth(this.md[0]);a=parseInt(a,10);return isNaN(a)||1>a||a>b?!1:this.md[1]=a},clone:function(){return new YearlessDate(this.md[0],this.md[1],this.settings)}});d.extend(k.YearlessDate,{getDaysInMonth:function(a){a=h[a];return f(a)?a.d:!1},getMonthName:function(a,b){var c=h[a];l(b)||(b="long");return f(c)?c[b.charAt(0)]:!1},monthLoop:function(a){d.each(h,function(b,c){f(c)&&a(b,c)})}});
var r={fade:{"in":"fadeIn",out:"fadeOut"},slide:{"in":"slideDown",out:"slideUp"},expand:{"in":"show",out:"hide"}};k.YearlessDate.Picker=Class.extend({init:function(a,b){this.input=d(a);if(!this.input.length)throw Error("No input identified");"true"!==this.input.data("YearlessDatepicker")&&(this.input.change(function(){alert("moo")}),d.proxy(function(){},this),this.input.change(d.proxy(this.onInputChange,this)).attr("readonly",!0),f(b)||(b={}),this.settings=d.extend(!0,{format:"long",separator:"/",
british:!1,css:{display:"none",width:"250px"},position:{input:{v:"bottom",h:"left"},container:{v:"top",h:"left"}},display:{time:200,effect:"expand"},on:{select:!1,change:!1}},b),this.container=d("<div></div>",{attr:{"class":"ydatepicker-container radius__6"},css:this.settings.css}).appendTo("body"),d.each({date:[1,1],min:!1,max:!1},d.proxy(function(a,b){var d=!1;this.settings[a]&&(d=this._parseDate(this.settings[a]));d||"date"!==a||(d=this.input.val(),d=this._parseDate(d));!d&&b&&(d=this._parseDate(b));
this.settings[a]=d},this)),this.settings.min&&this.settings.max&&!this.settings.date.isBetween(this.settings.min,this.settings.max)&&(this.settings.max=!1),this.date=this.settings.date.clone(),this.currentDate=this.date.clone(),this.drawPicker(),f(this.settings.alt)&&this.setupAltField())},destroy:function(){this.input.attr("readonly",!1);this.container.remove()},drawPicker:function(){for(var a=this.date.getMonth("long"),a="<div class='ydatepicker-head noselect'>\r\n                            <div class='ydatepicker-head__inner radius__6 gradient__light'>\r\n                                <a class='ydatepicker-head__left' data-shift='-1'>"+
"<svg width='20px' height='20px'>\r\n\t\t\t\t\t\t\t<path d='m28,14l-19.2,0l4.62,-4.62c0.394,-0.394 0.58,-0.864 0.58,-1.38c0,-0.984 -0.813,-2 -2,-2c-0.531,0 -0.994,0.193 -1.38,0.58l-7.958,7.958c-0.328,0.328 -0.662,0.733 -0.662,1.462s0.279,1.08 0.646,1.447001l7.974,7.973c0.386,0.386999 0.849,0.58 1.38,0.58c1.188,0 2,-1.016001 2,-2c0,-0.516001 -0.186,-0.986 -0.58,-1.379999l-4.62,-4.620001l19.2,0c1.104,0 2,-0.896 2,-2s-0.896,-2 -2,-2z' transform='scale(0.625) {{transform-rotate}}'/>\r\n\t\t\t\t\t\t</svg>".replace("{{transform-rotate}}",
"")+"</a>\r\n                                <span class='ydatepicker-head__month'><strong>"+a+"</strong></span>\r\n                                <a class='ydatepicker-head__right' data-shift='1'>"+"<svg width='20px' height='20px'>\r\n\t\t\t\t\t\t\t<path d='m28,14l-19.2,0l4.62,-4.62c0.394,-0.394 0.58,-0.864 0.58,-1.38c0,-0.984 -0.813,-2 -2,-2c-0.531,0 -0.994,0.193 -1.38,0.58l-7.958,7.958c-0.328,0.328 -0.662,0.733 -0.662,1.462s0.279,1.08 0.646,1.447001l7.974,7.973c0.386,0.386999 0.849,0.58 1.38,0.58c1.188,0 2,-1.016001 2,-2c0,-0.516001 -0.186,-0.986 -0.58,-1.379999l-4.62,-4.620001l19.2,0c1.104,0 2,-0.896 2,-2s-0.896,-2 -2,-2z' transform='scale(0.625) {{transform-rotate}}'/>\r\n\t\t\t\t\t\t</svg>".replace("{{transform-rotate}}",
"rotate(-180 16,16)")+"</a>\r\n                            </div>\r\n                        </div>\r\n                        <div class='ydatepicker-body noselect'>\r\n                            <div class='ydatepicker-body__inner'>\r\n                                <table>\r\n                                    <tr>",b=1;31>=b;b++)b-1&&1>(b-1)%7&&(a+="</tr><tr>"),a+="<td data-day='"+b+"'><a class='gradient__dark'>"+b+"</a></td>";this.container.html(a+"</tr>\r\n                                </table>\r\n                            </div>\r\n                        </div>");
this.setEvents();this.setInput()},setEvents:function(){this.container.find(".ydatepicker-head [data-shift]").on("click",d.proxy(this.onMonthShiftClick,this));this.container.find(".ydatepicker-head__left svg,.ydatepicker-head__right svg").hover(d.proxy(function(a){d(a.target).closest("svg").find("path").attr("fill","darkgrey")},this),d.proxy(function(a){d(a.target).closest("svg").find("path").attr("fill","black")},this));this.container.find(".ydatepicker-body td[data-day]").on("click",d.proxy(this.onDaySelect,
this));this.input.on("click",d.proxy(function(a){"true"!==this.container.data("ydatepicker__open")&&this.openPicker();a.stopPropagation()},this));d("body").on("click",d.proxy(this.closePicker,this));this.container.on("click",function(a){a.stopPropagation()})},closePicker:function(){var a=this.settings.display;this.container[r[a.effect].out](a.time);this.container.data("ydatepicker__open","false")},openPicker:function(){var a=this.settings.display;d(".ydatepicker-container").data("ydatepicker__open",
"false").hide();"true"!==this.container.data("ydatepicker__open")&&(this.shiftMonth(this.date.getMonth("numeric")-this.currentDate.getMonth("numeric")),this.setDisplay(),this.position(this.settings.position),this.container.data("ydatepicker__open","true"),this.container[r[a.effect]["in"]]({duration:a.time}))},onMonthShiftClick:function(a){a=d(a.target).closest("[data-shift]").data("shift");this.shiftMonth(a)},shiftMonth:function(a){this.currentDate.shiftMonth(a);this.setDisplay()},setDisplay:function(){var a=
YearlessDate.getDaysInMonth(this.currentDate.getMonth("numeric")),b=this.container.find(".ydatepicker-body table"),c=this.currentDate.getMonth(),g=this.container.find("table"),e=this.settings.min,f=this.settings.max;this.container.find(".ydatepicker-head__month strong").html(this.currentDate.getMonth("long"));b.find("td").show().removeClass("selected disabled");for(var h=a+1;31>=h;h++)b.find("td[data-day="+h+"]").hide();this.date.getMonth()==c&&b.find("td[data-day="+this.date.getDay()+"]").addClass("selected");
if(e&&f){b=d("initialize_empty_selection");if(e.getMonth()===c&&f.getMonth()===c)if(0>=e.compareTo(f)){for(c=0;c<e.getDay("numeric");++c)b=b.add("td[data-day="+c+"]",g);for(c=f.getDay("numeric")+1;c<=a;c++)b=b.add("td[data-day="+c+"]",g)}else for(c=f.getDay("numeric")+1;c<e.getDay();c++)b=b.add("td[data-day="+c+"]",g);else if(e.getMonth()===c)for(c=0;c<e.getDay();c++)b=b.add("td[data-day="+c+"]",g);else if(f.getMonth()===c)for(c=f.getDay("numeric")+1;c<=a;++c)b=b.add("td[data-day="+c+"]",g);else this.currentDate.isBetween(e,
f)||(b=b.add("td[data-day]",g));b.addClass("disabled")}},onDaySelect:function(a){a=d(a.target).closest("[data-day]");if(!a.hasClass("disabled")){if(this.currentDate.setDay(a.data("day"))&&(this.setDate(this.currentDate.clone()),p(this.settings.on.select)))try{this.settings.on.select(this.date.clone(),!0)}catch(b){}this.closePicker()}},setDate:function(a,b){if(a=this._parseDate(a))if(this.date=a.clone(),!b&&p(this.settings.on.change))try{this.settings.on.change(this.date.clone())}catch(c){}this.setInput();
this.setAltField()},onInputChange:function(a){a=this.input.val();this.setDate(a)},setInput:function(){this.input.val(this.date.toString(this.settings.format,this.settings.separator))},getDate:function(){return this.date.clone()},on:function(a,b){p(b)||(b=!1);-1<d.inArray(a,["change","select"])&&(this.settings.on[a]=b)},_parseDate:function(a){if(!(a instanceof YearlessDate))try{a=new YearlessDate(a)}catch(b){console.log(b),a=!1}return a},setMin:function(a){!(a=this._parseDate(a))||this.settings.max&&
!this.date.isBetween(a,this.settings.max)||(this.settings.min=a)},setMax:function(a){!(a=this._parseDate(a))||this.settings.min&&!this.date.isBetween(this.settings.min,a)||(this.settings.max=a)},position:function(a){var b=this.container,c=this.input;b.offset({left:-1E3}).show();var d=c.offset(),e={top:0,center:.5,bottom:1,left:0,right:1};b.offset({left:d.left+e[a.input.h]*c.outerWidth()-e[a.container.h]*b.outerWidth(),top:d.top+e[a.input.v]*c.outerHeight()-e[a.container.v]*b.outerHeight()}).hide()},
setupAltField:function(){var a=this.settings.alt,b=["json","long","short","dayMonth","monthDay"];!a||0>d.inArray(a.format,b)?this.settings.alt=!1:(l(a.field)&&"#"!==a.field.charAt(0)&&(a.field="#"+a.field),b=d(a.field),1>b.length&&(b=d("<input></input>",{attr:{id:a.field,name:a.field,type:"hidden"}}),this.input.after(b)),this.settings.alt.el=b,this.setAltField())},setAltField:function(){var a=this.settings.alt;a&&a.el&&a.el.val(this.getDate().toString(a.format))}});var v="setDate getDate destroy on setMin setMax".split(" ");
d.fn.YearlessDatepicker=function(a){var b=this.data("YearlessDatepicker");if("destroy"===a)b[a].apply(b,Array.prototype.slice.call(arguments,1)),this.data("YearlessDatepicker",!1);else{if(b&&-1<d.inArray(a,v))return b[a].apply(b,Array.prototype.slice.call(arguments,1));f(a)||!a?b||this.data("YearlessDatepicker",new YearlessDate.Picker(this,a)):d.error("Method "+a+" does not exist for jQuery.YearlessDatepicker")}}})(jQuery,this,document);
